language: node_js
node_js:
- lts/*
before_install:
- rm -rf ".git"
- cd api
install:
- npm install
- npm run build:dev
script: echo "Skipping NPM Tests!"
cache:
  directories:
  - node_modules
before_deploy:
- cd dist
- git init
- rm local.settings.json
- git add .
- git commit -m "Azure Functions Bot Deployment Commit"
deploy:
- provider: azure_web_apps
  username: "$AZ_DEV_SITE_USERNAME"
  password: "$AZ_DEV_SITE_PASSWORD"
  site: "$AZ_DEV_SITE_URL"
  skip_cleanup: true
  verbose: true
  on:
    branch: dev
- provider: azure_web_apps
  username:
    secure: jPjDoUyVq1fFf/nAUUrzxcUSebBusLoTW2a6SM9INtXVAabctJrFPkMY43Dh5d49fCGWWD8OZQcSqDiZfxNe+usOagGOAuoveI6CNBVXaC3AOuiubBIr2ccVh6ut+5zZqveaj827Bg4ehZx8FJU85abiJBi7teYbd6G9o6ypTzwirIoLNs92ck+xMilhhWKd7ASME6/jcqFiOMdyZeZKbaWhtFeg4UkOlxZSkr51LWTGVlwfnQVQCwF4mmgnVDSxGAJoXF1VZazebJQfJvmqjt2Gm5Gcin+eRkGEo0SEHKRSLWn2D/y0Frar9mTjoqTiI5yFXE+gICWP93lbOHf5MDWaGa52+D8avczv/K0+kY6lKTHpYoRJHdDn1ayhcztOVinjvkzKbTYfJle+WOEj8XZEEKOrqlFw701ZSB8kyNi+FbMyvPAGHHkU7iSH4WExJAW+8PcfX2WbJ8CH0R+E7T53Z+9lZgttWn7L9av14TMyVOlwaQ0cEUS2I1HqBDRmpREzqO8H4iSjr98qQtNArhGfDgOm6HUzKRfqnHdzgMGKyzRGzPgb8kPP331HshwgtTaR947qwxOJkIdwYFbRd1BuX2b2vPvERrBL0RJcX/7FvG0g7W3yxfUKTsTz6bOl+b4R45liS+ItzcTVdfnYF74ELNOTzqfL5Cz49/nd5LA=
  password:
    secure: LU3noo7bNhjIXWRvZ7v5tGKke3Q6nxk73U7wDFzbnZHjM8WpD4KwOjvSMF9nVZiS/qn8dwZ2b0PWZCFE+xPEAtq+N5VFMsItuFLkyg5JlTeXi4vcU2wmgntljzF3T3idJfqZuvD7Gv65KYu6Pwvia3ru0aUannKyroP3f5JEs4n8WzsdFpHEMKEg9epNhfC6RWS8K6P9SgN7cdakvmnybM4VIUFxaAWxoo+U7XUx6eWg825WGCxRMoR7wO2RhBr0nX4rOAKm5iAR1j2ICRgfDtpHpwQQQRbAKLmM1Rd/JQHGjEo1H4inm8WyKKqphTma16xuIuvIb/sDHIJNP0XAX0e3o8S3YkwT0QSHDrXrj831ryWHU0zzUl0OqTQxIBXofDaXgZeopo1cjLWzvVAi4A5iqcmcz25hRnn8A7U78FAAX7X+k0DE3r+2vq4pYvlBA+nAPhYvRZfnDBgOdQDm/LUe5YYoR2KJMAbS1Ml1AEmsTosTh05+Z1Y5AFqGbr6SLBrAiUxHcaX7T8S2wyNxgIiYRwI0mG64rjnUYd7Uvy9iUFwZLA0TUCU5fQoGxRLgLP2ZyvEwlk08qDyFnkEhfP47uAR2cwI38yoTYYFFmAa8vJnpBXh3VEQ6gVLazhxe2G+QOA8X8nq3IKzz1F3Ai9IGAI87MCeqA0wNBY8IjpI=
  site:
    secure: IHd2gQYnaICkIOkvEInAmWb2wbZdNFexVBPvWhXyLqtQ5/X4VtUr9jh/kqu0Abe7ilSS4kdjpYiLaS8gru2wCWFkScVfPbIp06Dkk6i5ujCLRcbGzM868tUSYCWcKBCRpUBAFguw1mL4WGLhJRIRfajrvTF5WUmFrecZASnSeWwoZlqnbjcmaGjx4HHLGqjTSdoAlccPHkNTszQMaAuzW6dF3U41ParYVE5U3mA2Gs279dmW3jE0vNipUjv/i/PYLEZ2D/Mv/MWedrMWY5lCffBfdVHAyx13MHf6Rv7iqvWXpjjxuwgHj/sB2KqwIsZ3E7Spql59GhaZSMfv4lujivl8ai0yQcL3wYEkgWpp1UZfWZ3paNnzAW/iMqUS8Z/OZPucFmXY4Osfo2qGsgdv4o3JpP2lkyhKC9z4DCn+UV6girGyfApM9T9hecP7UHqy8cddMP40WrhXDIQrMFu3UqaF7T2q/t/y8DNLQ0fmAItE3r9bZ1LQHeW4CGbSMuM7dcwLQT82eOO58Qj2zFzXfbfsTbp0Gvg+3N2IbsAx1JIMHgWei+gd0wtwbl9IOsaQvcFc9V9iro0oRLcjbU7PqTpkJ6GNossMZkUa/2V3cqy/lBs4ztpFtXXz97GqOcEVqkmGE6ZgUxvyaloM8lsuWqjPtu2AbKVosCdoFMyo8aU=
  skip_cleanup: true
  verbose: true
  on:
    branch: staging
env:
  global:
  - secure: vbnbn4ek8v1wqLU2N4czsucZy6KhyKKNYvCbuAaNPFLtXkxVo4FDHU6Zc3+hWPZEtigLEcVd4AM8XGxYLO8pPsUcZgOcDSuSkV/XzTe9bVvfzRCfji2WAPPK5mwvC+wzJQlOh/ZlGEcR5qXKHX+03W9xNR4404ZxwSY3TjOhg2tYIEfp/KtjST81WONYRM4hwMmz9ZsbRs7wHn9AIgfaZY4f5gNEKU3PyWP22+CMMKySb8BCqdVGN+qCZicoYGJkHaRzx9hhIbZ6dT7/sI9v+EcjqfoEvs7UDIrU3av9/QYUX0AjFnGrDiUHlYbIqviTTDiHp8+ILqLaRTm4CdsH2nRBwrRqjqCy/84LqBz2gayejPA70sfgMwmZcD6qby+ZZ5iLw41Zx77GFSn2e8x2l44zABx83oUgOzcvuVQARaQPzof1Ptuubb1ckV5AiD4vmfHHvuGvJhl7E+Z2wBWvUespA57ZPK+itU/Jkse0StTtqtzwNu30rQBQUudi/ZjfMl9+fKC4xcaA8DV39POjkh45Q6zJPUaXqj8AFhOLUa3j7BzyZe/1TJiLReCdVc01xz/lPgzbzCZ6rD6h+Q7Y0f5J5VV6sZ8I7nnkUYrXq/Yhsl65B1biTqY2TJSXpqomWQ9aTcwGxOeOX3PFtBd9PaN56pSdVwWDxGto8ir62To=
  - secure: M+qtvTE3Krx2AaFc6KHkYL49zk5TbVnjcHNkJQJgQYMl5qTBqsFwB/VsHx9qBJjQPNp0/iUd4/Q3nrv+zqjiuLWAGASZN5DAm5n4rRaaTkv3dC2lFegJ6fxjbNzEh0tlDy6XfEUQ61RqEuwaf2TWeLFbuD52O9QL+rmgpW3loE/g5Tbq/9nvyShVAfLUPi89lDiAgqOWkI3nupsY0Yc9vyrdTSbvwcY4pwFPDHNvAzw9RcWlpOha3UTTtTxgHkLWzEv5/2WxnBxNR6jButoJ6z2/a3XUZY/TtuhiDASMasXmTRQo/VnNFht1Dw9JH4MP4nqw7GIFdw2XWMXfyiDzbUhIDw4ZSXwxB8Xv5s6MAt/hoDlOWesUBrqlZjmF5tMG5f3zhiheKsw9lxDyYAb+pi4L4RsWbBNlyRjBGH8c2blQnV5N1uVUOJWK9NlVwY+UIn04onZIP3hJDLS3q1i7Yy6aDJwEkF8mUAmOcJx85TKxXASj+xhUw9iagXdOOQqJgKwPyLFTmcvbhVlOni4HqqaZ0GDpBo43BPpJUSIhXH/4LrOkkEgzBYXbCgFgvnbrKB2K+GZ6GZm/u5/gEWY6dYjhbe/LrPhhp3qg/XmHsF8KSoWcp9Egm7Nwu7EPuBhDmy8jfIBB0vncjli8O7M1qe7T+EPhwSJAR/gM9ZqJluE=
  - secure: d+d18ABiHwJNgMRbvzq0l/5IgaPkVS+w9GZuGvCz5y++17EY5ppnZQBQITz/eJqNENMwLG5fyPZlXmhlrP7Tu9X+kt33AoFJowqtoCg8ofHqmj+QQk92Akb4fioqf1pEp00245PqZ2EU45SP0D8yByktrnGWQDJ/h3lqtLP+4lO32d6qHYQHVvHsy8G1F6FIq/knQmtmsGuxbPyRVKBPeKZdRjD9dmGl+Vc/bHFEXh14wG0jRARFUDVd8+xWpJXnijLAs2HNjVqnUPfa/Ph+TdsDOl5f/XBUjf/Ehm0oEaS/QQsZu8F6JTEeiw+MPL0VDl8HVofZLEEYcCDb+VPGDAaa3D1SemFdoq1prnwnjRf93dD+U89kL45wgqUrS3DjG0WImO8zmplGw0vlffuT3QnIcZ6ALEHsHdwJjJy+f1W5x5YIQTOkVRW8M0EDNaCAif+jiJtK1q+iiTtY6fWEWhPlCRZI5Z8kNfoGQgMkUiv8GAnhbDsK5qmGwApnpqBoqBuEwY4SwtU1KXdYPGnQF73+RM/qIrkIMUlwlW66hRX5bD+1SQ2jh+inyTglLnUArYYEMoaqQ+6SfmWt2/x7I/H+2TzgVi4y2zquLxDSFwfVCjWaDPZsncPCNZmZOl2ZjE/08QDJLRcaU6Xy9X/toBeTQUqbGtOCwSWJEpqbVCU=
